<!DOCTYPE html>

<style type="text/css">

	* {

		font-family: 'Inter', sans-serif;
	}

	#parent-blog-posts {

		border-width: 1px;
		width: 700px;
		margin-right: 10%;
	}

	#blog-post {

		float: left;
		width: 600px;
		margin-left: 10px;
		margin-top: 10px;
	}

	#blog-post-lg {

		width: 300px;
	}

	#content {

		position: relative;
		width: 700px;
		margin-left: 10px;
	}

	#leaderboard {

		margin-top: 50px;
		font-size: 13px;
		width: 300px;
		float: right;
	}

	#subtitle {

		font-family: 'Inter', sans-serif;
		font-weight: 300;
		font-size: 20px;
	}

	#container {

		margin-left: 15px;
		margin-right: 15px;
	}

	#navbarNav {

		float: right;
		font-size: 16px;
		height: 50px;
		margin-top: 15px;
		top: 0;
		right: 0;
	}

	#title-container {

		margin-top: 15px;
		float: left;
		margin-left: 35px;
		width: 300px;
	}	

	#title {

		font-size: 25px;
	}

	#title-txt {

		font-size: 28px;
	}

	#top-section {

		height: 80px;
	}

	#bottom-section {

		float: bottom;
	}

	#homepage-bar {

		width: 500px;
		border-color: lightgray;
		border-radius: 1px;
		border-width: 1px;
	}

	#login-register {

		width: 100px;
		float: right;
		margin-bottom: 10px;
		margin-top: 20px;
		margin-right: 10px;
	}

	#contests {

		float: right;
	}

	@media only screen and (min-width: 320px) {

		#parent-blog-posts {

			width: 50%;
		}

		#blog-post {

			width: 100%;
		}

		#leaderboard {

			width: 28%;
		}

		.contests {

			width: 90%;
		}

		#content {

			width: 100%;
		}
	}

	@media only screen and (min-width: 480px) {

		#parent-blog-posts {

			width: 50%;
		}

		#blog-post {

			width: 100%;
		}

		#leaderboard {

			width: 28%;
		}

		#content {

			width: 100%;
		}

		.contests {

			width: 100%;
		}
	}

	@media only screen and (min-width: 1025px) {

		#parent-blog-posts {

			width: 60%;
		}

		#blog-post {

			width: 100%;
		}

		#leaderboard {

			width: 28%;
		}

		#content {

			width: 100%;
		}

		.contests {

			width: 100%;
		}
	}

</style>

<html>
<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
	<title> Put Funda | Welcome </title>
</head>
<body>

	<!-- Latest compiled and minified CSS -->

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

	<!--For downloading Google Fonts--> 

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap" rel="stylesheet">

	<!-- jQuery library -->

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>


	<div id="top-section">
		<div id="title-container"> 
			<p><a id="title" href="">Put Funda</a>
				<br>
				<span id="subtitle" style="font-size: 12px;">
					A forum for playing and hosting trivia contests.
				</span>
			</p>
		</div>
		<div id="login-register">
			<p>
				<span><a href="/login">Login</a>
					|
					<a href="/register">Register</a></span>
				</p>
			</nav>
		</div>
	</div>

	<div id="bottom-section" class="clearfix">
		<div id="container" class="clearfix">
			<div id="leaderboard">
				{% if active_contests is not None > 0 %}
				<div class="contests">
					<p><h4 style="margin-top: 5px; margin-left: 10px">Active Contests</h4></p>
					<table class="table table-bordered table-striped" style="font-size: 13px;">
						<thead>
							<tr>	
								<th scope="col">#</th>
								<th scope="col">Host</th>
								<th scope="col">Time</th>
							</tr>
						</thead>
						<tbody>
							{% for contest in active_contests %}
							<tr>
								<td><a href="/quiz/play_contest?contest_id={{contest.id}}">{{contest.id}}</a></td>
								<td><a class="username" href="">{{contest.host.username}}</a></td>
								<td>{{contest.time}}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<br>
				{% endif %}
				{% if new_contests is not None %}
				<div class="contests">
					<p><h4 style="margin-top: 5px; margin-left: 10px">Upcoming Contests</h4></p>
					<table class="table table-bordered table-striped" style="font-size: 13px;">
						<thead>
							<tr>	
								<th scope="col">#</th>
								<th scope="col">Host</th>
								<th scope="col">Time</th>
							</tr>
						</thead>
						<tbody>
							{% for contest in new_contests %}
							<tr>
								<td><a href="{% url 'view_contest' %}?contest_id={{contest.id}}">{{contest.id}}</a></td>
								<td><a class="username" href="">{{contest.host.username}}</a></td>
								<td>{{contest.time}}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<br>
				{% endif %}

				<p><h4 style="margin-top: 5px; margin-left: 10px">Leaderboard</h4></p>
				<table class="table table-bordered table-striped" style="font-size: 13px;">
					<thead>
						<tr>
							<th scope="col">Player</th>
							<th scope="col">Rating</th>
						</tr>
					</thead>
					<tbody>
						{% for user in users %}
						<tr>
							<td>{{user.user.username}}</td>
							<td class="rating">{{user.rating}}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<div id="parent-blog-posts">
				{% for post in blog_posts %}
				<div id="blog-post">

					<br><h3 align="left" style="margin-left: 10px;"> {{post.title}} </h3>
					<p style = "margin-left: 10px; font-size: 13px;"> 

						by 

						{% if post.anon %}
						<strong>anonymous</strong>
						{% else %}
						<a href="/users?user={{post.author.username}}"> {{post.author}} </a>
						{% endif %}

						at {{post.time}} 
					</p>
					<br>
					<div id="content">
						<p>{{post.content | safe}}</p>
					</div>
					<div id="like-comments">	
						<div id="like">
							<p id="like-txt">{{post.likes}}</p>
						</div>
						<div id="comments">
						</div>
					</div>
					<br>
				</div>
				{% endfor %}
			</div> <!-- Blog posts -->
		</div> <!-- Container -->
	</div> <!-- Bottom section -->
</body>

<script type="text/javascript">

		// Round off rating values
		var ratings = document.getElementsByClassName("rating"); 

		for(let i=0; i<ratings.length; i++) {

			let rating = Number(ratings[i].innerHTML); 
			ratings[i].innerHTML = rating.toFixed(0); 
		}

		// Redirect to login page 
		function login() {

			window.location.href='/login'; 
		}

		// Redirect to register page 
		function register() { 

			window.location.href='/register'; 
		}

	</script>

	</html>